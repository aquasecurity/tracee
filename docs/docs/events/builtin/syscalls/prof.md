
# prof

## Intro
prof - Event triggered when profiler events are enabled or disabled.

## Description
The `prof` event is triggered when profiler events are enabled or disabled. It is used to enable and disable per-process event profiling, which is used to measure the performance and execution of a given process. The `prof` event allows for fine-grained control over the events that are monitored, allowing for granular tracking of process behavior. 

The `prof` event has several drawbacks and edge-cases. Since it is specific to the process being monitored, it can be potentially slow to set up and can have unexpected side-effects on the process performance when enabled. Additionally, since the event is being monitored at the process level, it may be dependent on the type of process being monitored. 

## Arguments
* `FLAGS`: `unsigned long`[K] - Flags to configure the event profiling.
* `EVENTS`: `unsigned int`[K] - Array of events to monitor while profiling.

### Available Tags
* K - Originated from kernel-space.
* U - Originated from user space (for example, pointer to user space memory used to get it)
* TOCTOU - Vulnerable to TOCTOU (time of check, time of use)
* OPT - Optional argument - might not always be available (passed with null value)

## Hooks
### sched_process_exec
#### Type
kprobe + kretprobe
#### Purpose
Hook the `sched_process_exec` function to enable and disable the profiler events when the process executes.

### do_exit
#### Type
kprobe + kretprobe
#### Purpose
Hook the `do_exit` function to shutdown the profiler before exiting the process.

## Example Use Case
The `prof` event can be used to measure the performance or track the execution of specific processes on the system. It's commonly used in embedded and real-time applications where precise performance measurements are necessary. 

## Issues
The `prof` event is highly process-dependent and can lead to unexpected performance issues or decreased efficiency when enabled. Additionally, because it requires a precise setup across the entire stack, it can be slow to configure and start. 

## Related Events
The `prof` event is related to the `perf` event, which is used to observation of hardware performance counters.

> This document was automatically generated by OpenAI and needs review. It might
> not be accurate and might contain errors. The authors of Tracee recommend that
> the user reads the "events.go" source file to understand the events and their
> arguments better.
