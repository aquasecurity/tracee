'\" t
.\" Automatically generated by Pandoc 3.2
.\"
.TH "TRACEE\-SERVER" "1" "2025/01" "" "Tracee Server Flag Manual"
.SS NAME
tracee \f[B]\-\-server\f[R] \- Configure server options and endpoints
.SS SYNOPSIS
tracee \f[B]\-\-server\f[R] <http\-address=<host:port>> |
<grpc\-address=<protocol:address>> | grpc | metrics | healthz | pprof |
pyroscope
.SS DESCRIPTION
The \f[B]\-\-server\f[R] flag allows you to configure server options and
endpoints for Tracee.
This unified flag replaces the deprecated individual server flags and
provides better validation and error messages.
.PP
Server address options:
.IP \[bu] 2
\f[B]http\-address=<host:port>\f[R]: Start an HTTP server listening on
the specified address.
Used for metrics, healthz, pprof, and pyroscope endpoints.
.IP \[bu] 2
\f[B]grpc\-address=<protocol:address>\f[R]: Start a gRPC server
listening on the specified protocol and address.
Supported protocols are:
.RS 2
.IP \[bu] 2
\f[B]tcp:<port>\f[R]: TCP connection (e.g., tcp:4466).
If no port is specified, defaults to 4466.
.IP \[bu] 2
\f[B]unix:<socket_path>\f[R]: Unix domain socket (e.g.,
unix:/tmp/tracee.sock).
If no path is specified, defaults to /var/run/tracee.sock.
.RE
.PP
Server endpoint options (require HTTP server):
.IP \[bu] 2
\f[B]metrics\f[R]: Enable Prometheus metrics endpoint at /metrics.
If no HTTP server is configured, defaults to localhost:3366.
.IP \[bu] 2
\f[B]healthz\f[R]: Enable health check endpoint at /healthz.
If no HTTP server is configured, defaults to localhost:3366.
.IP \[bu] 2
\f[B]pprof\f[R]: Enable Go pprof debugging endpoints under
/debug/pprof/.
If no HTTP server is configured, defaults to localhost:3366.
.IP \[bu] 2
\f[B]pyroscope\f[R]: Enable Pyroscope profiling agent integration.
If no HTTP server is configured, defaults to localhost:3366.
.PP
Other options:
.IP \[bu] 2
\f[B]grpc\f[R]: Enable gRPC server with default Unix socket at
/var/run/tracee.sock.
Equivalent to grpc\-address=unix.
.PP
Multiple \f[B]\-\-server\f[R] flags can be specified to enable different
combinations of servers and endpoints.
.SS EXAMPLES
.IP \[bu] 2
To enable gRPC server with default Unix socket:
.RS 2
.IP
.EX
\-\-server grpc
.EE
.RE
.IP \[bu] 2
To enable gRPC server on a specific TCP port:
.RS 2
.IP
.EX
\-\-server grpc\-address=tcp:4466
.EE
.RE
.IP \[bu] 2
To enable gRPC server with custom Unix socket path:
.RS 2
.IP
.EX
\-\-server grpc\-address=unix:/tmp/tracee.sock
.EE
.RE
.IP \[bu] 2
To enable HTTP server with metrics endpoint:
.RS 2
.IP
.EX
\-\-server http\-address=:3366 \-\-server metrics
.EE
.RE
.IP \[bu] 2
To enable metrics endpoint with default HTTP server:
.RS 2
.IP
.EX
\-\-server metrics
.EE
.RE
.IP \[bu] 2
To enable multiple HTTP endpoints on custom address:
.RS 2
.IP
.EX
\-\-server http\-address=127.0.0.1:8080 \-\-server metrics \-\-server healthz \-\-server pprof
.EE
.RE
.IP \[bu] 2
To enable both gRPC and HTTP servers:
.RS 2
.IP
.EX
\-\-server grpc\-address=unix:/var/run/tracee.sock \-\-server http\-address=:3366 \-\-server metrics
.EE
.RE
.IP \[bu] 2
To enable all available endpoints:
.RS 2
.IP
.EX
\-\-server http\-address=:3366 \-\-server grpc\-address=tcp:4466 \-\-server metrics \-\-server healthz \-\-server pprof \-\-server pyroscope
.EE
.RE
.SS MIGRATION FROM DEPRECATED FLAGS
The \f[B]\-\-server\f[R] flag replaces the following deprecated flags:
.PP
.TS
tab(@);
l l.
T{
Deprecated Flag
T}@T{
New Server Flag Equivalent
T}
_
T{
\f[CR]\-\-metrics\-endpoint\f[R]
T}@T{
\f[CR]\-\-server metrics\f[R]
T}
T{
\f[CR]\-\-healthz\-endpoint\f[R]
T}@T{
\f[CR]\-\-server healthz\f[R]
T}
T{
\f[CR]\-\-pprof\-endpoint\f[R]
T}@T{
\f[CR]\-\-server pprof\f[R]
T}
T{
\f[CR]\-\-pyroscope\f[R]
T}@T{
\f[CR]\-\-server pyroscope\f[R]
T}
T{
\f[CR]\-\-http\-listen\-addr=:3366\f[R]
T}@T{
\f[CR]\-\-server http\-address=:3366\f[R]
T}
T{
\f[CR]\-\-grpc\-listen\-addr=tcp:4466\f[R]
T}@T{
\f[CR]\-\-server grpc\-address=tcp:4466\f[R]
T}
.TE
.PP
Migration examples:
.IP \[bu] 2
Before: \f[CR]\-\-metrics\-endpoint \-\-grpc\-listen\-addr=tcp:4466\f[R]
.IP \[bu] 2
After: \f[CR]\-\-server metrics \-\-server grpc\-address=tcp:4466\f[R]
.IP \[bu] 2
Before:
\f[CR]\-\-http\-listen\-addr=:8080 \-\-metrics\-endpoint \-\-healthz\-endpoint \-\-pprof\-endpoint\f[R]
.IP \[bu] 2
After:
\f[CR]\-\-server http\-address=:8080 \-\-server metrics \-\-server healthz \-\-server pprof\f[R]
.IP \[bu] 2
Before:
\f[CR]\-\-grpc\-listen\-addr=unix:/tmp/tracee.sock \-\-metrics\-endpoint\f[R]
.IP \[bu] 2
After:
\f[CR]\-\-server grpc\-address=unix:/tmp/tracee.sock \-\-server metrics\f[R]
.SS DEFAULT BEHAVIOR
.IP \[bu] 2
If no \f[B]\-\-server\f[R] flags are specified, no servers are started.
.IP \[bu] 2
If endpoint flags (metrics, healthz, pprof, pyroscope) are specified
without http\-address, an HTTP server is automatically created on
localhost:3366.
.IP \[bu] 2
If \f[B]grpc\f[R] flag is specified without grpc\-address, a Unix socket
server is created at /var/run/tracee.sock.
.IP \[bu] 2
If \f[B]grpc\-address=tcp\f[R] is specified without a port, defaults to
port 4466.
.IP \[bu] 2
If \f[B]grpc\-address=unix\f[R] is specified without a path, defaults to
/var/run/tracee.sock.
.IP \[bu] 2
Existing Unix socket files are automatically cleaned up before starting
the gRPC server.
.SS SEE ALSO
\f[B]tracee\f[R](1), \f[B]tracee\-output\f[R](1),
\f[B]tracee\-log\f[R](1)
